trigger: none

pool:
  vmImage: 'ubuntu-latest'

stages:
  - stage: SyncStage
    jobs:
      - job: sync
        pool:
          vmImage: 'ubuntu-latest'
        steps:
          - checkout: self
            persistCredentials: true
            clean: true
          - task: Bash@3
            inputs:
              targetType: 'inline'
              script: |
                docker build -t sync-repo:latest .
                docker run -t \
                  --env REPO_ORIGIN="$(REPO_ORIGIN)" \
                  --env REPO_DESTIN="$(REPO_DESTIN)" \
                sync-repo:latest env

